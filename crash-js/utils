#!/usr/bin/env node

// SPDX-License-Identifier: AGPL-3.0-or-later

//    ----------------------------------------------------------------------
//    Copyright Â© 2024, 2025  Pellegrino Prevete
//
//    All rights reserved
//    ----------------------------------------------------------------------
//
//    This program is free software: you can redistribute it and/or modify
//    it under the terms of the GNU Affero General Public License as published by
//    the Free Software Foundation, either version 3 of the License, or
//    (at your option) any later version.
//
//    This program is distributed in the hope that it will be useful,
//    but WITHOUT ANY WARRANTY; without even the implied warranty of
//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//    GNU Affero General Public License for more details.
//
//    You should have received a copy of the GNU Affero General Public License
//    along with this program.  If not, see <https://www.gnu.org/licenses/>.

const
  _yargs_module =
    require(
      "yargs");
_yargs =
  _yargs_module.yargs;
const
  _yargs_helpers_module =
    require(
      "yargs/helpers");
_hide_bin =
  _yargs_helpers_module.hideBin;


function
  _argv_url_get(
    _key_name) {
  let
    _argv,
    _assignment,
    _assignments,
    _key,
    _key_value,
    _location,
    _msg,
    _url,
    _value;
  if ( typeof _key_name === 'undefined' ) {
    _msg =
      "Getting all values."
    _msg_info(
      _msg);
    _key_name =
      "";
  }
  _argv =
    [];
  _location =
    window.location;
  _url =
    _location.search.substring(
      1);
  _assignments =
    _url.split(
      '&');
  for ( let
          _result =
            0;
        _result <
          _assignments.length;
        _result++ ) {
    _assignment =
      _assignments[
        _result];
    _key_value =
      _assignment.split(
        '=');
    _key =
      _key_value[
        0];
    if ( _key == _key_name ||
         _key_name == "" ) {
      _value =
        _key_value[
          1];
      _argv.push(
        _value);
    }
  }
  return _argv;
}

function
  _argv_get() {
  let
    _argv;
  if ( typeof window === 'undefined' &&
       ( typeof global !== 'undefined' && global.global === global ) &&
       typeof __webpack_require__ !== 'function' ) {
    _argv =
      process.argv;
  }
  else {
    _argv =
      _argv_url_get();
  }
  return _argv;
}

function
  _yargv_get() {
  let
    _argv,
    _yargs_object;
  _yargs_object =
    _yargs(
      _hide_bin(
        process.argv));
  return _yargs_object.parse();
}

function
  _process_exit_get() {
  let
    _process_exit;
  if ( typeof window === 'undefined' &&
       ( typeof global !== 'undefined' && global.global === global ) &&
       typeof __webpack_require__ === 'function' ) {
    _process_exit =
      process.exit;
  }
  else {
    _process_exit =
      function
        (_exit) {
        return _exit;
     };
  }
  return _process_exit
}

module.exports = {
  _argv_get:
    _argv_get,
  _argv_url_get:
    _argv_url_get,
  _process_exit_get:
    _process_exit_get,
  _yargv_get:
    _yargv_get
};
